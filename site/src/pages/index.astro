---
import Layout from "../layouts/Layout.astro";
import { loadAllCharacters, loadAllScenes, loadTimeline } from "../utils/yaml-loader.js";

const characters = loadAllCharacters();
const scenes = loadAllScenes();
const timeline = loadTimeline();
---

<Layout title="Home">
    <h1>Westworld Story Framework</h1>

    <div class="stats">
        <div class="stat">
            <h3>{characters.length}</h3>
            <p>Characters</p>
        </div>
        <div class="stat">
            <h3>{scenes.length}</h3>
            <p>Scenes</p>
        </div>
        <div class="stat">
            <h3>{timeline.length}</h3>
            <p>Timeline Events</p>
        </div>
    </div>

    <section>
        <h2>Recent Scenes</h2>
        <ul>
            {
                scenes.slice(0, 5).map((scene) => (
                    <li>
                        <a href={`/scenes/${scene.id}`}>{scene.title}</a>
                        <span> - Episode {scene.episode}</span>
                    </li>
                ))
            }
        </ul>
    </section>

    <section>
        <h2>Main Characters</h2>
        <ul>
            {
                characters.slice(0, 5).map((character) => (
                    <li>
                        <a href={`/characters/${character.id}`}>{character.name}</a>
                        <span> - {character.role}</span>
                    </li>
                ))
            }
        </ul>
    </section>

    <style>
        .stats {
            display: flex;
            gap: 40px;
            margin: 40px 0;
        }
        .stat {
            text-align: center;
        }
        .stat h3 {
            font-size: 3rem;
            margin: 0;
            color: #0066cc;
        }
        .stat p {
            margin: 0;
            color: #666;
        }
    </style>
</Layout>
